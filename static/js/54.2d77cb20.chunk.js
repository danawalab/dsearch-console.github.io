(this["webpackJsonpdsearch-console"]=this["webpackJsonpdsearch-console"]||[]).push([[54],{1478:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(59),c=n(0),i=n.n(c),l=n(38),o=n(87),u=n(11),s=n(131),d=n.n(s),m=n(714),f=n(170),h=n(598),p=n(607),b=n(650),g=n(724),y=n(751),E=n(168),v=n(683),j=n(678),x=n(682),O=n(681),k=n(765),_=n(684),S=n(717),C=n(718),T=n(719),w=n(697),z=n(720),q=n(694),A=n(663),P=n(621),R=n(757),W=n(715),B=Object(u.c)(m.a)(A.a,P.a),N=Object(u.c)(f.a)(A.a,P.a),U=Object(u.c)(h.a)(A.a,P.a),L=Object(u.c)(p.a)(A.a,P.a),F=Object(u.c)(b.a)(A.a,P.a),I=Object(q.a)((function(e){return{formControl:{minWidth:250},root:{flexGrow:1,width:"100%"},edit:{width:"100%"},link:{cursor:"pointer"},fab:{margin:e.spacing(2)},absolute:{position:"absolute",bottom:e.spacing(2),right:e.spacing(3)}}})),G=[{id:"no",label:"#",sorting:!0},{id:"name",label:"\uc774\ub984",sorting:!0},{id:"id",label:"\uc544\uc774\ub514",sorting:!0},{id:"index",label:"\uc120\ud0dd \uc778\ub371\uc2a4",sorting:!0},{id:"shard",label:"\uc0e4\ub4dc",sorting:!0},{id:"docCount",label:"\ubb38\uc11c \uc218",sorting:!0},{id:"size",label:"\uc6a9\ub7c9",sorting:!0},{id:"autoRun",label:"\uc790\ub3d9\uc2dc\uc791",sorting:!0}];t.default=Object(l.b)((function(e){return Object(a.a)(Object(a.a)({authUser:e.dsearchReducers.authUser},e.collectionReducers),e.indexTemplateReducers)}))((function(e){var t=e.dispatch,n=e.authUser,l=e.indexSuffixA,u=e.indexSuffixB,s=e.collectionList,m=e.catIndexTemplateList,f=Object(o.f)(),h=I(),p=Object(c.useState)(!1),b=Object(r.a)(p,2),q=b[0],A=b[1],P=Object(c.useState)(""),J=Object(r.a)(P,2),Z=J[0],D=J[1],K=Object(c.useState)(""),M=Object(r.a)(K,2),H=M[0],Q=M[1],V=Object(c.useState)(""),X=Object(r.a)(V,2),Y=X[0],$=X[1],ee=Object(c.useState)(!1),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],re=Object(c.useState)(!1),ce=Object(r.a)(re,2),ie=ce[0],le=ce[1],oe=Object(c.useState)(null),ue=Object(r.a)(oe,2),se=ue[0],de=ue[1],me=Object(c.useState)(!1),fe=Object(r.a)(me,2),he=fe[0],pe=fe[1],be=Object(c.useState)(!0),ge=Object(r.a)(be,2),ye=ge[0],Ee=ge[1],ve=Object(c.useState)(""),je=Object(r.a)(ve,2),xe=je[0],Oe=je[1],ke=Object(c.useState)("asc"),_e=Object(r.a)(ke,2),Se=_e[0],Ce=_e[1];function Te(){Ee(!0),pe(!1),de(null),ae(!1),le(!1),$(""),D(""),Q(""),A(!q)}function we(e){f.push("./indices-collections/".concat(e))}function ze(e){if(void 0===e||null===e||""===e)return!1;f.push("./indices/".concat(e))}function qe(e){var t=e+"";if(t.length<=3)return t;for(var n=Math.ceil(t.length/3),a=[],r=0;r<n;r++)a.unshift(t.slice(-3*(r+1),t.length-3*r));return a.join(",")}Object(c.useEffect)((function(){t(Object(R.j)()),t(Object(W.f)()),t(Object(R.l)()),t(Object(R.h)())}),[]);var Ae=s.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})).map((function(e,t){return Object(a.a)(Object(a.a)({},e),{},{no:t})}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{title:"\uceec\ub809\uc158"}),i.a.createElement("br",null),i.a.createElement(N,{variant:"h3",gutterBottom:!0,display:"inline"},"\uceec\ub809\uc158"),i.a.createElement(B,{my:6}),i.a.createElement(U,{align:"right"},n.role.index?i.a.createElement(g.a,{className:h.link,onClick:Te,color:"primary"},"\uceec\ub809\uc158 \uc0dd\uc131"):i.a.createElement(i.a.Fragment,null)),i.a.createElement("br",null),i.a.createElement(y.a,{component:E.a},i.a.createElement(v.a,{className:h.table,"aria-label":"simple table"},i.a.createElement(j.a,null,i.a.createElement(x.a,null,G.map((function(e){return i.a.createElement(O.a,{align:"center",key:e.id},e.sorting?i.a.createElement(k.a,{active:xe===e.id,direction:xe===e.id?Se:"asc",onClick:function(t){Oe(e.id);var n=xe===e.id&&"asc"===Se;Ce(n?"desc":"asc")}},e.label):e.label)})))),i.a.createElement(_.a,null,Ae.sort((function(e,t){return xe&&Se?"asc"===Se?e[xe]>t[xe]?1:-1:e[xe]>t[xe]?-1:1:0})).map((function(e,t){var n="";e.cron.split("||").forEach((function(e,t){n.length>0?n+=",  "+e:n=e}));var a=e.id,r=e.name,c=e.baseId,l=e.indexA||{},o=e.indexB||{},u=l.aliases&&Object.keys(l.aliases).find((function(e){return e===c})),s=void 0!==u&&null!==u,d=o.aliases&&Object.keys(o.aliases).find((function(e){return e===c})),m=void 0!==d&&null!==d;return i.a.createElement(x.a,{key:e.id},i.a.createElement(O.a,{align:"center"},e.no+1),i.a.createElement(O.a,{align:"center"},i.a.createElement(g.a,{className:h.link,onClick:function(){return we(a)}},r)),i.a.createElement(O.a,{align:"center"},i.a.createElement(g.a,{className:h.link,onClick:function(){return we(a)}},c)),i.a.createElement(O.a,{align:"center"},i.a.createElement(g.a,{style:{display:s?"block":"none"},onClick:function(){return ze(l.uuid)},className:h.link},l.index),i.a.createElement(g.a,{style:{display:m?"block":"none"},onClick:function(){return ze(o.uuid)},className:h.link},o.index),i.a.createElement(U,{style:{display:!1===s&&!1===m?"block":"none"}}," - ")),i.a.createElement(O.a,{align:"center"},i.a.createElement(U,{style:{display:s?"block":"none"}},"P[",l.pri||"-","] R[",l.rep||"-","]"),i.a.createElement(U,{style:{display:m?"block":"none"}},"P[",o.pri||"-","] R[",o.rep||"-","]"),i.a.createElement(U,{style:{display:!1===s&&!1===m?"block":"none"}}," - ")),i.a.createElement(O.a,{align:"center"},i.a.createElement(U,{style:{display:s?"block":"none"}},qe(l.docsCount||"-")),i.a.createElement(U,{style:{display:m?"block":"none"}},qe(o.docsCount||"-")),i.a.createElement(U,{style:{display:!1===s&&!1===m?"block":"none"}}," - ")),i.a.createElement(O.a,{align:"center"},i.a.createElement(U,{style:{display:s?"block":"none"}},l.storeSize||"-"),i.a.createElement(U,{style:{display:m?"block":"none"}},o.storeSize||"-"),i.a.createElement(U,{style:{display:!1===s&&!1===m?"block":"none"}}," - ")),i.a.createElement(O.a,{align:"center"},i.a.createElement(U,null,e.scheduled?"\ud65c\uc131\ud654 (".concat(n,")"):"\ube44\ud65c\uc131\ud654")))}))))),i.a.createElement(S.a,{open:q,fullWidth:!0,onClose:Te},i.a.createElement(C.a,null,"\uceec\ub809\uc158 \ucd94\uac00"),i.a.createElement(T.a,null,i.a.createElement(F,{container:!0,my:3},i.a.createElement(F,{item:!0,xs:4,mt:2},"\uceec\ub809\uc158 \uc774\ub984"),i.a.createElement(F,{item:!0,xs:8},i.a.createElement(w.a,{fullWidth:!0,autoFocus:!0,value:Z,onChange:function(e){ae(!1),D(e.target.value),0!==e.target.value.length&&0!==H.length&&!1===ie?Ee(!1):Ee(!0)},placeholder:"\uc0c1\ud488\uceec\ub809\uc158",error:ne}))),i.a.createElement(F,{container:!0,my:3},i.a.createElement(F,{item:!0,xs:4,mt:2},"\uceec\ub809\uc158 \uc544\uc774\ub514"),i.a.createElement(F,{item:!0,xs:8},i.a.createElement(w.a,{fullWidth:!0,value:H,onChange:function(e){le(!1),Q(e.target.value);var t=!1;if((e.target.value.length>1&&!/^[a-z]+[a-z0-9-_]/g.test(e.target.value)||1===e.target.value.length&&/[0-9]/g.test(e.target.value)||e.target.value.startsWith(".")||/[A-Z]/g.test(e.target.value)||/[\u3131-\u314e\uac00-\ud7a3]/g.test(e.target.value))&&(le(!0),t=!0),""!==e.target.value){var n=[];m.forEach((function(t){var r=t.index_patterns;(r=r.substring(1,r.length-1).split(", ")).forEach((function(c){var i=new RegExp(c.replace(/\*/gi,"\\S*"),"gi");if(null!==e.target.value.match(i)||e.target.value+l===c||e.target.value+u===c)return n.push(Object(a.a)(Object(a.a)({},t),{},{index_patterns:r})),!1}))})),n.find((function(t){return t.name===e.target.value+l}))||n.push({name:e.target.value+l,index_patterns:[e.target.value+l]}),n.find((function(t){return t.name===e.target.value+u}))||n.push({name:e.target.value+l,index_patterns:[e.target.value+u]}),$(e.target.value),0!==Z.trim().length&&!1===t?Ee(!1):Ee(!0)}else Ee(!0),$("")},placeholder:"product-collection",error:ie}))),i.a.createElement(F,{container:!0,my:3},i.a.createElement(F,{item:!0,xs:4},"\uc778\ub371\uc2a4 \ud15c\ud50c\ub9bf"),i.a.createElement(F,{item:!0,xs:8},Y||"")),i.a.createElement(F,{container:!0,my:3},i.a.createElement(F,{item:!0,xs:4},"\uc778\ub371\uc2a4 \ud328\ud134"),i.a.createElement(F,{item:!0,xs:8},""!==H?H+l+", ":"",""!==H?H+u:"")),i.a.createElement(F,{container:!0,my:3,style:{display:se?"none":"block",color:"red",textAlign:"center"}},i.a.createElement(F,{item:!0,xs:12},se))),i.a.createElement(z.a,null,i.a.createElement(L,{onClick:function(){return""===Z?(ae(!0),!1):H.length>1&&!/^[a-z]+[a-z0-9-_]/g.test(H)||1===H.length&&/[0-9]/g.test(H)||H.startsWith(".")||/[A-Z]/g.test(H)||/[\u3131-\u314e\uac00-\ud7a3]/g.test(H)?(le(!0),!1):(pe(!0),void t(Object(R.a)({name:Z,baseId:H,refresh_interval:1,replicas:1})).then((function(e){Te(),setTimeout((function(){t(Object(R.l)()),setTimeout((function(){t(Object(R.l)())}),500)}),500),pe(!1)})).catch((function(e){le(!0),de("\ucd94\uac00 \uc2e4\ud328."),console.log("error",e),pe(!1)})))},disabled:he||ye,variant:"outlined",color:"primary"},"\ucd94\uac00"),i.a.createElement(L,{onClick:Te,variant:"outlined",color:"default"},"\ucde8\uc18c"))))}))},715:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return d}));var a=n(76),r=n(3),c=new a.a,i=function(){return function(e){return c.call({uri:"/elasticsearch/_cat/templates?format=json"}).then((function(t){return e({type:r.L,payload:t.data.filter((function(e){return!e.name.startsWith(".")}))})}))}},l=function(e){var t=e.template,n=e.index_patterns,a=e.settings,r=e.mappings;return function(e){return c.call({uri:"/elasticsearch/_template/".concat(t),method:"PUT",data:{index_patterns:n,settings:a,mappings:r}})}},o=function(e){var t=e.template;return function(e){return c.call({uri:"/elasticsearch/_template/".concat(t),method:"DELETE"})}},u=function(e){var t=e.template;return function(e){return c.call({uri:"/elasticsearch/_template/".concat(t)}).then((function(n){return e({type:r.K,payload:n.data[t]})}))}},s=function(){return function(e){return c.call({uri:"/templates/comments",method:"GET"}).then((function(t){if(void 0==t.data||void 0==t.data.hits||0===t.data.hits.hits.length)e({type:r.q,payload:[]});else{var n=t.data.hits.hits.map((function(e){return e}));e({type:r.q,payload:n})}}))}},d=function(e){var t=e.id,n=e.name,a=e.updatedComment;return function(e){return c.call({uri:"/templates/comments",method:"PUT",data:{name:n,id:t,data:a}})}}},757:function(e,t,n){"use strict";n.d(t,"l",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"j",(function(){return l})),n.d(t,"i",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"k",(function(){return b})),n.d(t,"d",(function(){return g})),n.d(t,"e",(function(){return y}));var a=n(3),r=new(n(76).a),c=function(){return function(e){return r.call({uri:"/collections"}).then((function(t){e({type:a.p,payload:t.data})}))}},i=function(e){return function(t){return r.call({uri:"/collections",method:"POST",data:e})}},l=function(){return function(e){return r.call({uri:"/collections",params:{action:"indexSuffix"}}).then((function(t){return e({type:a.n,payload:t.data})}))}},o=function(e){return function(t){return r.call({uri:"/collections/".concat(e)}).then((function(e){return t({type:a.l,payload:e.data})}))}},u=function(e){return function(t){return r.call({uri:"/collections/".concat(e),method:"delete"})}},s=function(e,t){return function(n){return r.call({uri:"/collections/".concat(e),method:"put",params:{action:"source"},data:t}).then((function(e){return e.data}))}},d=function(e,t){return function(n){return r.call({uri:"/collections/".concat(e),method:"put",params:{action:"schedule"},data:t}).then((function(e){return e.data}))}},m=function(e){var t=e.indexA,n=e.indexB,c=e.from,i=e.size,l=e.type;return function(e){return r.call({uri:"/elasticsearch/.dsearch_index_history/_search",method:"post",params:{pretty:!0,filter_path:"hits"},data:{query:{bool:{should:[{match:{index:t}},{match:{index:n}},{match:{"index.keyword":t}},{match:{"index.keyword":n}},{match:{"jobType.keyword":l}},{match:{jobType:l}}],minimum_should_match:2}},sort:[{startTime:{order:"desc"},_score:{order:"desc"}}],from:c,size:i}}).then((function(t){return e({type:a.m,payload:t.data})}))}},f=function(e){var t=e.indexA,n=e.indexB,c=e.from,i=e.size;return function(e){return r.call({uri:"/elasticsearch/.dsearch_index_history/_search",method:"post",params:{pretty:!0,filter_path:"hits"},data:{query:{bool:{should:[{term:{index:{value:t}}},{term:{index:{value:n}}},{term:{"index.keyword":{value:t}}},{term:{"index.keyword":{value:n}}}],minimum_should_match:1}},sort:[{startTime:{order:"desc"},_score:{order:"desc"}}],from:c,size:i}}).then((function(t){return e({type:a.m,payload:t.data})}))}},h=function(e){var t=e.indexA,n=e.indexB,a=e.time;return function(e){return r.call({uri:"/elasticsearch/.dsearch_index_history/_delete_by_query",method:"post",data:{query:{bool:{should:[{match:{index:{query:t,boost:1}}},{match:{index:{query:n,boost:1}}}],minimum_should_match:1,filter:{range:{startTime:{lte:a}}}}}}}).then((function(e){return e.data}))}},p=function(){return function(e){return r.call({uri:"/elasticsearch/_cat/templates?format=json"}).then((function(t){return e({type:a.g,payload:t.data})}))}},b=function(e){return function(t){return r.call({uri:"/collections/".concat(e,"/job")}).then((function(e){return e.data?t({type:a.o,payload:e.data}):t({type:a.o,payload:{}}),e.data}))}},g=function(e,t){return function(n){return r.call({uri:"/collections/".concat(e,"/action"),method:"PUT",params:{action:t}}).then((function(e){return e.data}))}},y=function(e){return function(t){return r.call({uri:"/elasticsearch/_aliases",method:"POST",data:{actions:e}}).then((function(e){return e.data}))}}}}]);
//# sourceMappingURL=54.2d77cb20.chunk.js.map