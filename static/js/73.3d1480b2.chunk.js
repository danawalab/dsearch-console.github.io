(this["webpackJsonpdsearch-console"]=this["webpackJsonpdsearch-console"]||[]).push([[73],{1042:function(e,t,a){"use strict";a.r(t);var n=a(894),r=a(16),l=a(0),i=a.n(l),c=a(14),u=a(3),o=new(a(71).a),s=a(134),m=a.n(s),d=a(94),f=a(771),h=a(685),E=a(713),g=a(665),p=a(691),v=a(694),b=a(378),x=a(683),y=a(99),j=a(692),T=a(693),O=a(618),S=a(718),_=a(686),w=a(588),k=a(656),z=a(655),C=a(689),F=a(13),D=a(20),M=a(39),B=a(895),I=a.n(B);function R(){var e=Object(r.a)(["\n    min-width: 25px;\n    max-width: 25px;\n    width: 25px;\n    margin: 2px;\n    min-height: 25px;\n    max-height: 25px;\n    height: 25px;\n    font-size: 0.9em;\n    padding: 2px;\n"]);return R=function(){return e},e}function L(){var e=Object(r.a)(["\n    border: 1px solid rgba(224, 224, 224, 1);\n    padding: 3px;\n"]);return L=function(){return e},e}var N=Object(C.a)((function(e){return{headerField:{fontSize:"1.2em",fontWeight:"bold"},headerValue:{fontSize:"1.2em",fontWeight:"bold"},primaryShard:{border:"1px solid"},replicaShard:{border:"1px dashed"},margin:{margin:e.spacing(1)},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),A=Object(F.a)({root:{height:10,backgroundColor:Object(D.i)("#A9D0F5",.5)},bar:{borderRadius:20,backgroundColor:"#013ADF"}})(f.a),U=Object(c.c)(h.a)(w.a,k.a),W=Object(c.c)(E.a)(w.a,k.a),J=Object(c.c)(g.a)(w.a,k.a),X=Object(c.c)(p.a)(w.a,k.a,z.a),q=Object(c.c)(v.a)(L()),G=(Object(c.c)(b.a)(R()),function(e,t){return((new Date).getTime()-new Date(e).getTime()).valueOf()/t*100}),H=function(e){var t=((new Date).getTime()-new Date(e).getTime())/3600/1e3*60,a=Math.floor(t/60),n=Math.floor(t%60);if(a>=720){var r=a/30/24;return Math.ceil(r)+"\uac1c\uc6d4"}if(a>=24){var l=a/24;return Math.ceil(l)+"\uc77c"}return 0!==a&&0!==n?a+"\uc2dc\uac04 "+n+"\ubd84":0!==a&&0===n?a+"\uc2dc\uac04":n+"\ubd84"};function V(e){var t=e.status,a=e.indices,n=(N(),Object(d.f)());var r=[];return Object.values(t).map((function(e){if("green"!==e.health){var t="";Object.values(a).forEach((function(a){a.index===e.index&&(t=a.uuid)}));var n=e;n.uuid=t,r.push(n)}})),i.a.createElement(U,null,i.a.createElement(x.a,null,i.a.createElement(y.a,{variant:"h4",gutterBottom:!0,display:"inline"},"\uc8fc\uc758\ud560 \uc778\ub371\uc2a4"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(j.a,null,i.a.createElement(T.a,null,r.length>0?r.map((function(e){return i.a.createElement(X,{key:e.index},i.a.createElement(q,{align:"center"},i.a.createElement(O.a,{display:"flex",justifyContent:"left",alignItems:"center"},i.a.createElement(I.a,{style:{color:e.health,marginRight:"5px"}}),i.a.createElement(S.a,{style:{cursor:"pointer"},onClick:function(){return t=e.uuid,void n.push("./indices/".concat(t));var t}},i.a.createElement(y.a,{variant:"h5"},e.index)))),i.a.createElement(q,{align:"center"},"yellow"===e.health?i.a.createElement("font",{color:"orange"}," \ub808\ud50c\ub9ac\uce74 \uc0e4\ub4dc \uc774\uc0c1 "):i.a.createElement("font",{color:"red"}," \ud504\ub77c\uc774\uba38\ub9ac \uc0e4\ub4dc \uc774\uc0c1 ")))})):i.a.createElement(X,null,i.a.createElement(q,{colSpan:2,style:{border:"0px"}},i.a.createElement(O.a,{align:"center",style:{height:"24px"}})))))))}function Y(e){var t=e.result,a=e.running,r=(e.status,e.indices),l=Object(d.f)(),c=N(),u=[],o={};if(t.hits.hits.length>=0){var s,m=Object(n.a)(t.hits.hits);try{for(m.s();!(s=m.n()).done;){var f=s.value;o[f._source.index]=f._source}}catch(v){m.e(v)}finally{m.f()}}var h=Object.keys(a);if(0!==h.length){var E,g=Object(n.a)(h);try{var p=function(){var e=E.value,t=a[e].server;if(void 0!==t){var n="";if(Object.values(r).forEach((function(e){e.index===t.index&&(n=e.uuid)})),void 0!==o[t.index]&&void 0!==o[t.index].endTime&&void 0!==o[t.index].startTime&&void 0!==o[t.index].docSize){var l=o[t.index].endTime-o[t.index].startTime,i=o[t.index].docSize;G(t.startTime,l),u.push({startTime:t.startTime,index:t.index,estimatedTime:l,docSize:i,uuid:n})}else u.push({startTime:t.startTime,index:t.index,uuid:n})}};for(g.s();!(E=g.n()).done;)p()}catch(v){g.e(v)}finally{g.f()}}return i.a.createElement(U,null,i.a.createElement(x.a,null,i.a.createElement(y.a,{variant:"h4",gutterBottom:!0,display:"inline"},"\uc804\uccb4\uc0c9\uc778 \uc2e4\ud589\uc911"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(j.a,null,i.a.createElement(T.a,null,0===u.length?i.a.createElement(X,null,i.a.createElement(q,{align:"center"}," ",i.a.createElement(O.a,{display:"flex",alignItems:"center",justifyContent:"center"}," ",i.a.createElement(y.a,null,"\ud604\uc7ac \uc2e4\ud589\uc911\uc778 \uc0c9\uc778 \uc791\uc5c5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")),"  ")):Object.values(u).map((function(e){return i.a.createElement(X,{key:e.index},i.a.createElement(q,{align:"center"},i.a.createElement(S.a,{style:{cursor:"pointer"},onClick:function(){return t=e.uuid,void l.push("./indices/".concat(t));var t}},i.a.createElement(y.a,{variant:"h5"},e.index))),i.a.createElement(q,{align:"center"},i.a.createElement(O.a,{display:"flex",alignItems:"center",justifyContent:"center"},i.a.createElement(O.a,{width:"100%",mr:1},i.a.createElement(A,{className:c.margin,variant:"determinate",color:"secondary",value:Number(G(e.startTime,e.estimatedTime))})),i.a.createElement(O.a,{minWidth:15},i.a.createElement(y.a,{variant:"body2",color:"textSecondary"}," "))),void 0!==e.estimatedTime?i.a.createElement(i.a.Fragment,null," \uc608\uc0c1 \uc885\ub8cc \uc2dc\uac04 : ",function(e){e/=1e3;var t=Math.floor(e/3600),a=Math.ceil((e-3600*t)/60);return 0!==t?t+"\uc2dc\uac04 "+a+"\ubd84":a+"\ubd84"}(e.estimatedTime)," ",i.a.createElement("br",null)," "):i.a.createElement(i.a.Fragment,null,"\uc608\uc0c1 \uc885\ub8cc \uc2dc\uac04 : - ",i.a.createElement("br",null)),void 0!==e.docSize?i.a.createElement(i.a.Fragment,null," \uc608\uc0c1 \ucc98\ub9ac \ubb38\uc11c \uac74\uc218 : ",function(e){var t=e+"";if(t.length<=3)return t;for(var a=Math.ceil(t.length/3),n=[],r=0;r<a;r++)n.unshift(t.slice(-3*(r+1),t.length-3*r));return n.join(",")}(e.docSize)," ",i.a.createElement("br",null)," "):i.a.createElement(i.a.Fragment,null,"\uc608\uc0c1 \ucc98\ub9ac \ubb38\uc11c \uac74\uc218 : - ",i.a.createElement("br",null)),"\uc2dc\uc791\uc2dc\uac04 : ",H(e.startTime)," \uc804 \uc2dc\uc791",i.a.createElement("br",null)))}))))))}function K(e){var t=e.result,a=e.running,n=e.status,r=e.indices;N();return i.a.createElement(J,{container:!0,spacing:3},i.a.createElement(J,{item:!0,xs:6},i.a.createElement(Y,{result:t,running:a,status:n,indices:r})),i.a.createElement(J,{item:!0,xs:6},i.a.createElement(V,{status:n,indices:r})))}function P(e){var t=e.result,a=e.alias,n=e.indices,r=Object(d.f)(),l=[];return Object.values(t.hits.hits).forEach((function(e){var t="";Object.values(a).forEach((function(a){e._source.index===a.index&&(t=a.alias)}));var r="";Object.values(n).forEach((function(t){t.index===e._source.index&&(r=t.uuid)})),l.push({index:e._source.index,alias:t,status:e._source.status,startTime:e._source.startTime,endTime:e._source.endTime,docSize:e._source.docSize,storage:e._source.store,uuid:r})})),i.a.createElement(i.a.Fragment,null,i.a.createElement(U,{mt:2,style:{overflow:"auto"}},i.a.createElement(x.a,null,i.a.createElement(y.a,{variant:"h4",gutterBottom:!0,display:"inline"},"\uc804\uccb4\uc0c9\uc778 \uacb0\uacfc"),i.a.createElement("br",null)," ",i.a.createElement("br",null),i.a.createElement(j.a,null,i.a.createElement(_.a,null,i.a.createElement(X,null,i.a.createElement(q,{align:"center"},"\uc0c9\uc778 \uacb0\uacfc"),i.a.createElement(q,{align:"center"},"\uc778\ub371\uc2a4"),i.a.createElement(q,{align:"center"},"\ubcc4\uce6d"),i.a.createElement(q,{align:"center"},"\ucd5c\uadfc \uc131\uacf5"),i.a.createElement(q,{align:"center"},"\uc18c\uc694 \uc2dc\uac04"),i.a.createElement(q,{align:"center"},"\ubb38\uc11c\uc218"),i.a.createElement(q,{align:"center"},"\uc2a4\ud1a0\ub9ac\uc9c0 \uc6a9\ub7c9"))),i.a.createElement(T.a,null,0===l.length?i.a.createElement(X,null,i.a.createElement(q,{colSpan:7,align:"center"}," ",i.a.createElement(O.a,{display:"flex",alignItems:"center",justifyContent:"center"}," ",i.a.createElement(y.a,null,"\uc804\uccb4 \uc0c9\uc778 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."))," ")):Object.values(l).sort((function(e,t){return e.endTime>t.endTime?-1:e.endTime==t.endTime?0:1})).map((function(e){return i.a.createElement(X,{key:e.index},i.a.createElement(q,{align:"center"},i.a.createElement(O.a,{display:"flex",justifyContent:"left",alignItems:"center"},e.status&&"SUCCESS"===e.status?i.a.createElement(I.a,{color:"primary"}):i.a.createElement(I.a,{style:{color:"red"}}),i.a.createElement(y.a,{style:{marginLeft:"5px"}},e.status))),i.a.createElement(q,{align:"center"},i.a.createElement(S.a,{style:{cursor:"pointer"},onClick:function(){return t=e.uuid,void r.push("./indices/".concat(t));var t}},i.a.createElement(y.a,{variant:"h5"},e.index))),i.a.createElement(q,{align:"center"},e.alias),i.a.createElement(q,{align:"center"},i.a.createElement("b",null,H(e.endTime)," \uc804 "),i.a.createElement("br",null),function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)}(e.endTime)),i.a.createElement(q,{align:"center"},function(e){e/=1e3;var t=Math.floor(e/3600),a=Math.ceil((e-3600*t)/60);return 0!==t?t+"\uc2dc\uac04 "+a+"\ubd84":a+"\ubd84"}(e.endTime-e.startTime)),i.a.createElement(q,{align:"center"},void 0===(t=e.docSize)||null===t?"":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),i.a.createElement(q,{align:"center"},e.storage));var t})))))))}var Q=null;t.default=Object(M.b)((function(e){return{result:e.dashBoardReducers.result,running:e.dashBoardReducers.running,status:e.dashBoardReducers.status,alias:e.dashBoardReducers.alias,indices:e.dashBoardReducers.indices}}))((function(e){var t=e.dispatch,a=e.result,n=e.running,r=e.status,c=e.alias,s=e.indices;function d(){t((function(e){return o.call({uri:"/elasticsearch/.dsearch_index_history/_search",method:"post",data:{query:{bool:{minimum_should_match:1,should:[{term:{jobType:"FULL_INDEX"}},{term:{"jobType.keyword":"FULL_INDEX"}}]}},sort:[{endTime:{order:"desc"}}],size:50}}).then((function(t){return e({type:u.D,payload:t.data})})).catch((function(e){return console.error(e)}))})),Q=setTimeout((function(){d()}),18e4)}return N(),Object(l.useEffect)((function(){return t((function(e){return o.call({uri:"/dashboard/indexing"}).then((function(t){return e({type:u.fb,payload:t.data})})).catch((function(e){return console.error(e)}))})),t((function(e){return o.call({uri:"/elasticsearch/_cat/indices?format=json"}).then((function(t){return e({type:u.G,payload:t.data})})).catch((function(e){return console.error(e)}))})),t((function(e){return o.call({uri:"/elasticsearch/_cat/aliases?format=json"}).then((function(t){return e({type:u.x,payload:t.data})})).catch((function(e){return console.error(e)}))})),t((function(e){return o.call({uri:"/elasticsearch/_cat/indices",params:{format:"json"}}).then((function(t){return e({type:u.p,payload:t.data})})).catch((function(e){return console.error(e)}))})),d(),function(){null!=Q&&clearTimeout(Q)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,{title:"\ub300\uc2dc\ubcf4\ub4dc"}),i.a.createElement(y.a,{variant:"h3",gutterBottom:!0,display:"inline"}," \ub300\uc2dc\ubcf4\ub4dc "),i.a.createElement(W,{my:6}),i.a.createElement(K,{result:a,running:n,status:r,indices:s}),i.a.createElement(P,{result:a,alias:c,status:r,indices:s}))}))}}]);
//# sourceMappingURL=73.3d1480b2.chunk.js.map