(this["webpackJsonpdsearch-console"]=this["webpackJsonpdsearch-console"]||[]).push([[57],{1024:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(62),c=n(0),l=n.n(c),i=n(38),u=n(95),o=n(14),s=n(136),d=n.n(s),m=n(722),f=n(100),h=n(624),p=n(693),y=n(384),b=n(671),g=n(725),E=n(762),v=n(179),x=n(700),j=n(695),O=n(699),k=n(703),_=n(701),S=n(728),w=n(729),C=n(730),T=n(717),z=n(731),A=n(698),W=n(595),q=n(660),B=n(754),N=n(744),R=Object(o.c)(m.a)(W.a,q.a),P=Object(o.c)(f.a)(W.a,q.a),U=Object(o.c)(h.a)(W.a,q.a),I=(Object(o.c)(p.a)(W.a,q.a),Object(o.c)(y.a)(W.a,q.a)),F=Object(o.c)(b.a)(W.a,q.a),J=Object(A.a)((function(e){return{formControl:{minWidth:250},root:{flexGrow:1,width:"100%"},edit:{width:"100%"},link:{cursor:"pointer"}}}));t.default=Object(i.b)((function(e){return Object(a.a)(Object(a.a)({authUser:e.dsearchReducers.authUser},e.collectionReducers),e.indexTemplateReducers)}))((function(e){var t=e.dispatch,n=e.authUser,i=e.indexSuffixA,o=e.indexSuffixB,s=e.collectionList,m=e.catIndexTemplateList,f=Object(u.f)(),h=J(),p=Object(c.useState)(!1),y=Object(r.a)(p,2),b=y[0],A=y[1],W=Object(c.useState)(""),q=Object(r.a)(W,2),L=q[0],Z=q[1],D=Object(c.useState)(""),G=Object(r.a)(D,2),M=G[0],H=G[1],K=Object(c.useState)(""),Q=Object(r.a)(K,2),V=Q[0],X=Q[1],Y=Object(c.useState)(!1),$=Object(r.a)(Y,2),ee=$[0],te=$[1],ne=Object(c.useState)(!1),ae=Object(r.a)(ne,2),re=ae[0],ce=ae[1],le=Object(c.useState)(null),ie=Object(r.a)(le,2),ue=ie[0],oe=ie[1],se=Object(c.useState)(!1),de=Object(r.a)(se,2),me=de[0],fe=de[1],he=Object(c.useState)(!0),pe=Object(r.a)(he,2),ye=pe[0],be=pe[1];function ge(){be(!0),fe(!1),oe(null),te(!1),ce(!1),X(""),Z(""),H(""),A(!b)}function Ee(e){f.push("./indices-collections/".concat(e))}function ve(e){if(void 0===e||null===e||""===e)return!1;f.push("./indices/".concat(e))}function xe(e){var t=e+"";if(t.length<=3)return t;for(var n=Math.ceil(t.length/3),a=[],r=0;r<n;r++)a.unshift(t.slice(-3*(r+1),t.length-3*r));return a.join(",")}return Object(c.useEffect)((function(){t(Object(B.i)()),t(Object(N.d)()),t(Object(B.k)()),t(Object(B.g)())}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{title:"\uceec\ub809\uc158"}),l.a.createElement("br",null),l.a.createElement(P,{variant:"h3",gutterBottom:!0,display:"inline"},"\uceec\ub809\uc158"),l.a.createElement(R,{my:6}),l.a.createElement(U,{align:"right"},n.role.index?l.a.createElement(g.a,{className:h.link,onClick:ge,color:"primary"},"\uceec\ub809\uc158 \uc0dd\uc131"):l.a.createElement(l.a.Fragment,null)),l.a.createElement("br",null),l.a.createElement(E.a,{component:v.a},l.a.createElement(x.a,{className:h.table,"aria-label":"simple table"},l.a.createElement(j.a,null,l.a.createElement(O.a,null,l.a.createElement(k.a,{align:"center"},"#"),l.a.createElement(k.a,{align:"center"},"\uc774\ub984"),l.a.createElement(k.a,{align:"center"},"\uc544\uc774\ub514"),l.a.createElement(k.a,{align:"center"},"\uc120\ud0dd \uc778\ub371\uc2a4"),l.a.createElement(k.a,{align:"center"},"\uc0e4\ub4dc"),l.a.createElement(k.a,{align:"center"},"\ubb38\uc11c \uc218"),l.a.createElement(k.a,{align:"center"},"\uc6a9\ub7c9"),l.a.createElement(k.a,{align:"center"},"\uc790\ub3d9\uc2dc\uc791"))),l.a.createElement(_.a,null,s.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})).map((function(e,t){var n=e.id,a=e.name,r=e.baseId,c=e.indexA||{},i=e.indexB||{},u=c.aliases&&Object.keys(c.aliases).find((function(e){return e===r})),o=void 0!==u&&null!==u,s=i.aliases&&Object.keys(i.aliases).find((function(e){return e===r})),d=void 0!==s&&null!==s;return l.a.createElement(O.a,{key:e.id},l.a.createElement(k.a,{align:"center"},t+1),l.a.createElement(k.a,{align:"center"},l.a.createElement(g.a,{className:h.link,onClick:function(){return Ee(n)}},a)),l.a.createElement(k.a,{align:"center"},l.a.createElement(g.a,{className:h.link,onClick:function(){return Ee(n)}},r)),l.a.createElement(k.a,{align:"center"},l.a.createElement(g.a,{style:{display:o?"block":"none"},onClick:function(){return ve(c.uuid)},className:h.link},c.index),l.a.createElement(g.a,{style:{display:d?"block":"none"},onClick:function(){return ve(i.uuid)},className:h.link},i.index),l.a.createElement(U,{style:{display:!1===o&&!1===d?"block":"none"}}," - ")),l.a.createElement(k.a,{align:"center"},l.a.createElement(U,{style:{display:o?"block":"none"}},"P[",c.pri||"-","] R[",c.rep||"-","]"),l.a.createElement(U,{style:{display:d?"block":"none"}},"P[",i.pri||"-","] R[",i.rep||"-","]"),l.a.createElement(U,{style:{display:!1===o&&!1===d?"block":"none"}}," - ")),l.a.createElement(k.a,{align:"center"},l.a.createElement(U,{style:{display:o?"block":"none"}},xe(c.docsCount||"-")),l.a.createElement(U,{style:{display:d?"block":"none"}},xe(i.docsCount||"-")),l.a.createElement(U,{style:{display:!1===o&&!1===d?"block":"none"}}," - ")),l.a.createElement(k.a,{align:"center"},l.a.createElement(U,{style:{display:o?"block":"none"}},c.storeSize||"-"),l.a.createElement(U,{style:{display:d?"block":"none"}},i.storeSize||"-"),l.a.createElement(U,{style:{display:!1===o&&!1===d?"block":"none"}}," - ")),l.a.createElement(k.a,{align:"center"},l.a.createElement(U,null,e.scheduled||"false")))}))))),l.a.createElement(S.a,{open:b,fullWidth:!0,onClose:ge},l.a.createElement(w.a,null,"\uceec\ub809\uc158 \ucd94\uac00"),l.a.createElement(C.a,null,l.a.createElement(F,{container:!0,my:3},l.a.createElement(F,{item:!0,xs:4,mt:2},"\uceec\ub809\uc158 \uc774\ub984"),l.a.createElement(F,{item:!0,xs:8},l.a.createElement(T.a,{fullWidth:!0,autoFocus:!0,value:L,onChange:function(e){te(!1),Z(e.target.value),0!==e.target.value.length&&0!==M.length&&!1===re?be(!1):be(!0)},placeholder:"\uc0c1\ud488\uceec\ub809\uc158",error:ee}))),l.a.createElement(F,{container:!0,my:3},l.a.createElement(F,{item:!0,xs:4,mt:2},"\uceec\ub809\uc158 \uc544\uc774\ub514"),l.a.createElement(F,{item:!0,xs:8},l.a.createElement(T.a,{fullWidth:!0,value:M,onChange:function(e){ce(!1),H(e.target.value);var t=!1;if((e.target.value.length>1&&!/^[a-z]+[a-z0-9-_]/g.test(e.target.value)||1===e.target.value.length&&/[0-9]/g.test(e.target.value)||e.target.value.startsWith(".")||/[A-Z]/g.test(e.target.value)||/[\u3131-\u314e\uac00-\ud7a3]/g.test(e.target.value))&&(ce(!0),t=!0),""!==e.target.value){var n=[];m.forEach((function(t){var r=t.index_patterns;(r=r.substring(1,r.length-1).split(", ")).forEach((function(c){var l=new RegExp(c.replace(/\*/gi,"\\S*"),"gi");if(null!==e.target.value.match(l)||e.target.value+i===c||e.target.value+o===c)return n.push(Object(a.a)(Object(a.a)({},t),{},{index_patterns:r})),!1}))})),n.find((function(t){return t.name===e.target.value+i}))||n.push({name:e.target.value+i,index_patterns:[e.target.value+i]}),n.find((function(t){return t.name===e.target.value+o}))||n.push({name:e.target.value+i,index_patterns:[e.target.value+o]}),X(e.target.value),0!==L.trim().length&&!1===t?be(!1):be(!0)}else be(!0),X("")},placeholder:"product-collection",error:re}))),l.a.createElement(F,{container:!0,my:3},l.a.createElement(F,{item:!0,xs:4},"\uc778\ub371\uc2a4 \ud15c\ud50c\ub9bf"),l.a.createElement(F,{item:!0,xs:8},V||"")),l.a.createElement(F,{container:!0,my:3},l.a.createElement(F,{item:!0,xs:4},"\uc778\ub371\uc2a4 \ud328\ud134"),l.a.createElement(F,{item:!0,xs:8},""!==M?M+i+", ":"",""!==M?M+o:"")),l.a.createElement(F,{container:!0,my:3,style:{display:ue?"none":"block",color:"red",textAlign:"center"}},l.a.createElement(F,{item:!0,xs:12},ue))),l.a.createElement(z.a,null,l.a.createElement(I,{onClick:function(){return""===L?(te(!0),!1):M.length>1&&!/^[a-z]+[a-z0-9-_]/g.test(M)||1===M.length&&/[0-9]/g.test(M)||M.startsWith(".")||/[A-Z]/g.test(M)||/[\u3131-\u314e\uac00-\ud7a3]/g.test(M)?(ce(!0),!1):(fe(!0),void t(Object(B.a)({name:L,baseId:M,refresh_interval:1,replicas:1})).then((function(e){ge(),setTimeout((function(){t(Object(B.k)()),setTimeout((function(){t(Object(B.k)())}),500)}),500),fe(!1)})).catch((function(e){ce(!0),oe("\ucd94\uac00 \uc2e4\ud328."),console.log("error",e),fe(!1)})))},disabled:me||ye,variant:"outlined",color:"primary"},"\ucd94\uac00"),l.a.createElement(I,{onClick:ge,variant:"outlined",color:"default"},"\ucde8\uc18c"))))}))},744:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o}));var a=n(75),r=n(3),c=new a.a,l=function(){return function(e){return c.call({uri:"/elasticsearch/_cat/templates?format=json"}).then((function(t){return e({type:r.J,payload:t.data.filter((function(e){return!e.name.startsWith(".")}))})}))}},i=function(e){var t=e.template,n=e.index_patterns,a=e.settings,r=e.mappings;return function(e){return c.call({uri:"/elasticsearch/_template/".concat(t),method:"PUT",data:{index_patterns:n,settings:a,mappings:r}})}},u=function(e){var t=e.template;return function(e){return c.call({uri:"/elasticsearch/_template/".concat(t),method:"DELETE"})}},o=function(e){var t=e.template;return function(e){return c.call({uri:"/elasticsearch/_template/".concat(t)}).then((function(n){return e({type:r.I,payload:n.data[t]})}))}}},754:function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"m",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"j",(function(){return y})),n.d(t,"d",(function(){return b}));var a=n(3),r=new(n(75).a),c=function(){return function(e){return r.call({uri:"/collections"}).then((function(t){console.log(t.data),e({type:a.o,payload:t.data})}))}},l=function(e){return function(t){return r.call({uri:"/collections",method:"POST",data:e})}},i=function(){return function(e){return r.call({uri:"/collections",params:{action:"indexSuffix"}}).then((function(t){return e({type:a.m,payload:t.data})}))}},u=function(e){return function(t){return r.call({uri:"/collections/".concat(e)}).then((function(e){return t({type:a.k,payload:e.data})}))}},o=function(e){return function(t){return r.call({uri:"/collections/".concat(e),method:"delete"})}},s=function(e,t){return function(n){return r.call({uri:"/collections/".concat(e),method:"put",params:{action:"source"},data:t}).then((function(e){return e.data}))}},d=function(e,t){return function(n){return r.call({uri:"/collections/".concat(e),method:"put",params:{action:"schedule"},data:{scheduled:t}}).then((function(e){return e.data}))}},m=function(e){var t=e.indexA,n=e.indexB,c=e.from,l=e.size,i=e.type;return function(e){return r.call({uri:"/elasticsearch/.dsearch_index_history/_search",method:"post",params:{pretty:!0,filter_path:"hits"},data:{query:{bool:{should:[{match:{index:t}},{match:{index:n}},{match:{"index.keyword":t}},{match:{"index.keyword":n}},{match:{"jobType.keyword":i}},{match:{jobType:i}}],minimum_should_match:2}},sort:[{startTime:{order:"desc"},_score:{order:"desc"}}],from:c,size:l}}).then((function(t){return e({type:a.l,payload:t.data})}))}},f=function(e){var t=e.indexA,n=e.indexB,c=e.from,l=e.size;return function(e){return r.call({uri:"/elasticsearch/.dsearch_index_history/_search",method:"post",params:{pretty:!0,filter_path:"hits"},data:{query:{bool:{should:[{term:{index:{value:t}}},{term:{index:{value:n}}},{term:{"index.keyword":{value:t}}},{term:{"index.keyword":{value:n}}}],minimum_should_match:1}},sort:[{startTime:{order:"desc"},_score:{order:"desc"}}],from:c,size:l}}).then((function(t){return e({type:a.l,payload:t.data})}))}},h=function(e){var t=e.indexA,n=e.indexB,a=e.time;return function(e){return r.call({uri:"/elasticsearch/.dsearch_index_history/_delete_by_query",method:"post",data:{query:{bool:{should:[{match:{index:{query:t,boost:1}}},{match:{index:{query:n,boost:1}}}],minimum_should_match:1,filter:{range:{startTime:{lte:a}}}}}}}).then((function(e){return e.data}))}},p=function(){return function(e){return r.call({uri:"/elasticsearch/_cat/templates?format=json"}).then((function(t){return e({type:a.f,payload:t.data})}))}},y=function(e){return function(t){return r.call({uri:"/collections/".concat(e,"/job")}).then((function(e){return e.data?t({type:a.n,payload:e.data}):t({type:a.n,payload:{}}),e.data}))}},b=function(e,t){return function(n){return r.call({uri:"/collections/".concat(e,"/action"),method:"PUT",params:{action:t}}).then((function(e){return e.data}))}}}}]);
//# sourceMappingURL=57.0c1b0877.chunk.js.map